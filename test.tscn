[gd_scene load_steps=5 format=2]

[ext_resource path="res://example_projects/state_test/white_box.svg" type="Texture" id=1]

[sub_resource type="GDScript" id=2]
script/source = "extends Node2D

var dynamic_start
var physics_fps = [60, 75, 90, 120, 15, 30, 45]
var physics_i = 0
var delta

func _ready():
    $Dynamic.queued_position = $Dynamic.position
    $Dynamic.queued_rotation = $Dynamic.rotation
    dynamic_start = Data.instance_to_dictionary($Dynamic, [\"queued_position\",\"queued_rotation\",\"linear_velocity\",\"angular_velocity\"])

func _physics_process(delta):
    self.delta = delta

func _input(event):
    if event is InputEventKey:
        if event.is_pressed():
            if event.scancode == KEY_R:
                Data.dictionary_to_instance(dynamic_start, $Dynamic)
            if event.scancode == KEY_PLUS:
                physics_i = (physics_fps.size() + physics_i + 1) % physics_fps.size()
                ProjectSettings.set_setting(\"physics/common/physics_fps\", physics_fps[physics_i])
                print(\"Physics FPS set to: %s\" % ProjectSettings.get_setting(\"physics/common/physics_fps\"))
            if event.scancode == KEY_MINUS:
                physics_i = (physics_fps.size() + physics_i - 1) % physics_fps.size()
                ProjectSettings.set_setting(\"physics/common/physics_fps\", physics_fps[physics_i])
                print(\"Physics FPS set to: %s\" % ProjectSettings.get_setting(\"physics/common/physics_fps\"))
            if event.scancode == KEY_O:
                print(delta)
"

[sub_resource type="GDScript" id=3]
script/source = "extends 'res://entities/rigid_body_2d/rigid_body_2d.gd'

"

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 50, 50 )

[node name="Node2D" type="Node2D"]
script = SubResource( 2 )

[node name="Dynamic" type="RigidBody2D" parent="."]
position = Vector2( 651.402, 152.172 )
rotation = -0.628876
script = SubResource( 3 )

[node name="Sprite" type="Sprite" parent="Dynamic"]
texture = ExtResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Dynamic"]
shape = SubResource( 1 )

[node name="Static" type="RigidBody2D" parent="."]
position = Vector2( 650.067, 642.058 )
scale = Vector2( 15, 1 )
mode = 1

[node name="Sprite" type="Sprite" parent="Static"]
texture = ExtResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Static"]
shape = SubResource( 1 )
